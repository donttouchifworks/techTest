on:
  push:
    branches: master
name: ðŸš€ Deploy website on push
jobs:
  build-and-deploy:
  name: build-and-deploy
  runs-on: ubuntu-latest
  steps:
- uses: actions/checkout@v2


  - name: Set Node.js Version
    uses: actions/setup-node@v1
    with:
      node-version: 12.x


  - name: Install dependencies
    run: yarn install


  - name: Build project
    run: npm run build --if-present
    env:
      CI: false


  - name: List output files
    run: find build/ -print


  - name: Deploy to ftp server
    uses: SamKirkland/FTP-Deploy-Action@4.1.0
    with:
      server: '${{ secrets.FTP_ADDRESS }}'
      username: '${{ secrets.FTP_USER }}'
      password: '${{ secrets.FTP_PASSWORD }}'
      local-dir: build-web/
      server-dir: /domains/lavrentiev.tech/public_html
